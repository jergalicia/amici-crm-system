{% extends "base.html" %}

{% block content %}
<div class="header">
    <div class="page-title">GestiÃ³n de PaÃ­ses</div>
    <a href="{{ url_for('countries.create') }}" class="btn-primary"
        style="text-decoration: none; width: auto; display: inline-block;">+ Nuevo PaÃ­s</a>
</div>

<div class="card">
    {% if countries %}
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="text-align: left; border-bottom: 2px solid var(--gray-200);">
                <th style="padding: 1rem;">ID</th>
                <th style="padding: 1rem;">Nombre</th>
                <th style="padding: 1rem;">CÃ³digo</th>
                <th style="padding: 1rem;">EstadÃ­sticas</th>
                <th style="padding: 1rem;">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for country in countries %}
            <tr style="border-bottom: 1px solid var(--gray-100);">
                <td style="padding: 1rem; color: var(--text-light);">#{{ country.id }}</td>
                <td style="padding: 1rem; font-weight: 500;">{{ country.name }}</td>
                <td style="padding: 1rem;">{{ country.code }}</td>
                <td style="padding: 1rem; font-size: 0.9rem; color: var(--text-light);">
                    Users: {{ country.users.count() }} | Eds: {{ country.editions.count() }}
                </td>
                <td style="padding: 1rem; display: flex; gap: 0.5rem;">
                    <a href="{{ url_for('countries.edit', id=country.id) }}"
                        style="color: var(--gray-800); text-decoration: none;">âœï¸</a>

                    <form action="{{ url_for('countries.delete', id=country.id) }}" method="post"
                        onsubmit="return confirm('Â¿Eliminar este paÃ­s? Solo es posible si no tiene datos asociados.');"
                        style="display: inline;">
                        <button type="submit"
                            style="background: none; border: none; cursor: pointer; color: var(--primary-red);">ğŸ—‘ï¸</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="text-align: center; padding: 3rem;">
        <p style="color: var(--text-light);">No hay paÃ­ses configurados.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
